# tcRackModules
## Blur

![blur screenshot](./doc/images/Blur-screenshot.png)

Blur is a VCV Rack module that does spectral manipulations on incoming audio.

### Usage Hints: 

**Length** - sets the the number of seconds worth of FFT frames to store in a history buffer. The buffer is limited to 10,000 frames or 10 seconds, whichever is reached first, depending on the sample rate, FFT frame size, and oversample settings. 

**Position** - the position in the history buffer where the output is generated from. Think of the history buffer as a kind of delay line and the position being the read head. Output is generated by interpolating the values between frames around the playabck position. Modulation the position plays the frames forward and backward. 
Modulate slower/faster than real time to get slowed down and sped up playback.

**Frame Drop** - sets the probability of discarding new audio input. Smaller values let more frames in, larger values let fewer frames in. At 0, all incoming audio is framed up and passed into the history buffer. At 100%, no new audio is added to the history buffer, effectively freezing the contents of the buffer. NOTE: This caught me a few times where I saved a rack with Frame Dropper set to 100% while manipulating captured audio. On re-opening the rack, Blur made no output. It took me a bit to realize that the Dropper was full on, suppressing incoming audio. Backing off the Dropper opened the pipe for new audio.

**Freeze** - freezes the history buffer contents by disabling all audio input. When freeze is disabled, the Frame Dropper controls the percentage of new audio allowed into the history buffer.

**Blur** - sets the reach of the bin picker. The bin picker selects bin values randomly within a range of frames on either side of the playback position. The Blur control sets the distance away from the position that the picker can pick from. A 0 value means use only local bins. A maximum value means pick from any frame in the history buffer.

**Robot** - simulates classic robot effect by setting all phases to 0. Blur Mix also controls the wet/dry ratio for this effect. Watch your levels with this effect, robotizing seems to increase or decrease the overall level of the output by a few dB depending on the signal being affected.

**Blur Mix** - controls the wet/dry mix of the blurred and non-blurred output. Try high blur with low mix and vice-versa.

**Center** - the center frequency of the Freq Band.

**Span** - the width of the Freq Band. 

**Inside**, **Outside**, **All** - selects how the Freq Band affect the Blur, Pitch and Gain controls.
- Inside: frequencies inside the range are affected by the effect, frequencies outside are suppressed
- Outside: frequencies inside the range are suppressed, frquencies outside the range are affected by the effect
- All: all frequencies are affected by the effect.

The Pitch selector has two additional settings that preserve the non-selected frequencies.

**Pitch** - increase or decrease pitch. With quantization the pitch can swing from +/- 3 octaves in selected semitone/fifth/octave steps. When quantization is not active the pitch shifting is smooth - CCW motion takes the pitch down to very low, barely audible, good for tape-stop type effects. CW motion on the right of the dial raises the pitch up to 2 octaves higher.

**Quant** - pitch quantization
-* no quantization 
-1 semitones
-5 fifths and octaves
-8 octaves 

**Gain** - output gain. CCW drops to -60 dB. CW raises to +12 dB.

**Mix** - wet/dry blend. Fully CCW is 100% dry, fully CW is 100% wet.

**Phase Reset** - zeroes out the phase history buffers to adjust for tiny residuals that can sometimes build up over time.

**Popup Menu** has options to set the FFT size and the Oversample amount. Low FFT sizes are good for distorting the sound. Low oversample amounts also tend to introduce noise and artifacts. Larger FFT sizes with oversamlple of 4 or 8 provide better clarity. FFT Size 2048 with oversample 4 is a good starting point. Experimentation is the key!

